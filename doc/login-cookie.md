# 로그인 쿠키

* 로그인 한 사용자가 차후에 다시 방문했을 때, 쿠키값을 보고, 인증 처리.
* 유효기간은 며칠? 21일. 재방문시 연장?

## 기본 아이디어

* 민감하지 않은 기본 정보를 평문 EDN으로 담고, 타임스탬프를 포함한 서명을 하자.
* 개인키는 인증서버만 알고 있다.
* 공개키는 어디에 노출돼도 상관없다 -> 제3서버에서도 인증 검증은 가능해 진다.

## 궁금한 것

* 이미 클로저도 지원하는 인증 쿠키 미들웨어가 있지 않을까?

## 노출할 기본정보

인증에 필수인 정보를 기록한다. 자주 사용하지 않는 정보는 쿠키에 담지 말고, 필요할 때 서버에 요청하자. 단, 구글어날리틱스(GA)에 보낼 정보는 기본으로 포함하는 것이 좋겠다.

### 인증처리를 위한 필수 정보

* 아이디
* 만료일시
* 인증서버 서명

### 인증처리후 넘겨줄 세션 프로필 정보

* 성명
* 코호트
* 요금제
* 이메일인증여부
* 약관동의일시

Q. 기본정보를 쿠키에 별도 보관한다면, 애써 세션을 별도 관리할 필요가 있나? 로그인 프로필 정보 외에 세션에 담을 만한 정보는 무엇이 있나?

A. SPA 구조이니만큼, 세션이 필요 없을 수도 있다. 무언가 필요한 기본 정보를 클라이언트에 한번 내려주면, 그걸 브라우저가 보관하면 된다. 아, 그런데 Refresh가 될 수 있구나. Refresh 해도 살아 남아야하는 정보는 뭐가 있나? 프로필 정보는 필요없다. (쿠키로부터 재생가능하다)
